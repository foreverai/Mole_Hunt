#kivy 1.8.0

<DisplayText_1@Label>
	font_name: 'Fonts/PressStart2P.ttf'
	bold: True
	font_size: 20	

<DisplayScore_1@Label> 
	font_name: 'Fonts/PressStart2P.ttf' 
	bold: True      
	font_size: 15
	
<DisplayText_2@Label>
	font_name: 'Fonts/PressStart2P.ttf'
	bold: True
	font_size: 15	

<DisplayScore_2@Label> 
	font_name: 'Fonts/PressStart2P.ttf' 
	bold: True      
	font_size: 10	
	
<DescriptionText@Label> 
	font_name: 'Fonts/PressStart2P.ttf' 
	text_size: self.size
	valign: 'middle'
	halign: 'center'
	bold: True      
	font_size: 10	

###Having this template gives button behaviour to Image
###Allowing the on_press event to function	
<Character@ButtonBehavior+Image>
	on_press: app.startpopup.charselect.image_select(self)

<TimesUp>
	app: app
		
	BoxLayout:
		orientation: 'vertical'
		size: root.x_size, root.y_size
		center: root.x_center, root.y_center
		DisplayText_1:
			size_hint: 1, 5
			text: 'Times Up'
		DisplayScore_1:
			text: 'Score'	
		DisplayScore_1:
			text: str(root.app.game.databar.score_label)	

<SelectBox>
	startpopup: app.startpopup
	
	BoxLayout:
		center: root.x_center, root.y_center
		size: root.x_width, root.y_height
		canvas:
			Rectangle:
				source: root.img_selectbox
				size: self.size
				pos: self.pos	
				
<CharSelect>
	startpopup: app.startpopup
	selectbox: selectbox_obj
	character1: character1_obj
	
	###Selection Box		
	SelectBox:
		id: selectbox_obj	
	
	###Characters
	GridLayout:	
		size: root.size
		cols: root.char_columns
		padding: self.width/40
		Character:
			id: character1_obj
			source: root.character_lst[0]	
		Character:
			source: root.character_lst[1]		

#The 'DASH' overides the automatic popup attributes
<-StartPopUp>
	app: app
	charselect: charselect_obj
				
    size_hint: root.startpopup_size
    auto_dismiss: False  
    			
	BoxLayout:
		size: root.size 
		padding: self.width/75
		orientation: 'vertical'	
		canvas:
			Rectangle:
				source: root.img_startpopup
				size: self.size
				pos: self.pos
		
		###Title & Description	
		BoxLayout:
			orientation: 'vertical'	
			DisplayText_1:
				text: 'Mole Basher'	
			DescriptionText:
				text: 'Bash your chosen face as many times as possible in the time limit available.'		
		
		###Character Selection	
		RelativeLayout:
			CharSelect:
				id: charselect_obj
		
		###Button
		AnchorLayout:
			size_hint: 1, 0.5
			anchor_x: 'center'
			anchor_y: 'center'	
		    Button:
		    	background_color: 0, 0, 0, 0
		    	size_hint: 0.5, 0.9
		    	font_name: 'Fonts/PressStart2P.ttf' 
		        text: 'Play'
		        on_press: root.start_click()
		        on_press: root.dismiss()            		 
 
<DataBar>
	game: app.game
	
	canvas:
		Rectangle:
			source: root.img_databar
        	pos: self.pos
        	size: self.size	
	
	BoxLayout:
		size: root.size
		y: root.height * 6    #root.height is from this widget not the controller widget
		orientation: 'horizontal'
		
		BoxLayout:
			orientation: 'vertical'
			DisplayText_2:
				text: 'Score'	
			DisplayScore_2:
				text: str(root.score_label)	
			BoxLayout:
				size_hint: 1, 1.5       #Creates a blank box below the text in effect pushing the text up
				
		BoxLayout:
			orientation: 'vertical'		
			DisplayText_1:
				text: 'Time'
			DisplayScore_1: 
				text: str(root.time_label)
				
		BoxLayout:
			orientation: 'vertical'	
			DisplayText_2:
				text: 'High Score'								          						
			DisplayScore_2:
				text: str(root.high_score_label)	
			BoxLayout:
				size_hint: 1, 1.5	         
				
<Mole>
	game: app.game
	
	canvas.before:
		Rectangle:
			source: root.current_char
			pos: self.pos
			size: self.size
			
<MoleGame>:
	app: app
	databar: databar_obj
	mole: mole_obj
	gamebox: game_box_obj
       
	BoxLayout:
		orientation: 'vertical'
		size: root.size						
					
		###Contains the display labels
		DataBar:
			id: databar_obj	
			size_hint: 1, 0.1667	# 1 / the databar size multiplier

		###Displays the game box
		FloatLayout:	
			id: game_box_obj			
			canvas:
		        Rectangle:
		        	source: root.img_gamebox
		            pos: self.pos
		            size: self.size		    	
		    	             
		    Mole:	
		    	id: mole_obj
		    	size_hint: self.mole_size
		    	center_x: root.width/2
		    	center_y: root.height/2
